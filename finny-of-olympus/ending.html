<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fenuz: Sebuah Pesan Penting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Cinzel:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-image: url('media/images/judol-bg.svg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      color: #f0e6ff;
      font-family: 'Inter', sans-serif;
      /* Menggunakan flexbox untuk menengahkan kontainer utama */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    body::-webkit-scrollbar { display: none; }
    body { -ms-overflow-style: none; scrollbar-width: none; }

    .font-cinzel { font-family: 'Cinzel', serif; font-weight: 700; }
    .font-baloo { font-family: 'Baloo 2', cursive; }
    
    @keyframes fadeOutUp {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(-20px); }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-fade-out-up { animation: fadeOutUp 0.5s ease-out forwards; }
    .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
  </style>
</head>
<body class="overflow-hidden">

  <!-- Elemen Audio untuk Musik Latar, sekarang dengan 'loop' -->
  <audio id="background-music" src="media/audio/judol-sad.mp3" autoplay loop></audio>

  <!-- Gambar Karakter Fenuz di pojok kiri bawah -->
  <img 
    src="media/images/fenuz.png" 
    alt="Karakter Fenuz" 
    class="w-[140px] md:w-[280px] h-auto fixed bottom-0 left-0 z-20"
    onerror="this.onerror=null;this.src='https://placehold.co/280x420/ffffff/000000?text=Fenuz';">

  <!-- Kontainer utama yang sekarang terpusat di layar -->
  <main class="relative flex flex-col items-center justify-center w-full max-w-3xl px-4">
    <!-- Kontainer Chat -->
    <div id="chat-container" class="w-full min-h-[220px] md:min-h-[250px] flex flex-col justify-center bg-gradient-to-br from-purple-900 via-indigo-900 to-purple-800 bg-opacity-80 backdrop-blur-md p-6 md:p-8 rounded-2xl border-2 border-purple-400/70 shadow-2xl shadow-purple-500/40 cursor-pointer" onclick="nextChat()">
      
      <div id="chat-content-wrapper" class="animate-fade-in-up">
        <p id="chat-text" class="font-cinzel text-[14px] md:text-2xl text-center text-white leading-relaxed tracking-wider"></p>
        
        <div id="image-container" class="my-4 hidden">
          <img id="chat-image" src="" alt="Fakta Judi Online" class="rounded-lg w-full max-w-sm mx-auto h-auto border-2 border-purple-300/50">
        </div>
        
        <p id="chat-source" class="text-xs text-center text-purple-300 mt-2 hidden font-sans"></p>
        
        <p id="continue-indicator" class="text-sm text-center text-white/80 mt-5 font-baloo font-bold">(Klik di mana saja untuk melanjutkan)</p>
      </div>

      <div id="final-buttons-container" class="hidden flex-col sm:flex-row items-center justify-center gap-4">
        <button id="help-button" class="w-full sm:w-auto bg-gradient-to-r from-blue-500 to-teal-400 text-white py-2 px-6 rounded-full transform hover:scale-105 font-baloo text-lg tracking-wider">
          Cari Bantuan Profesional
        </button>
        <button id="understand-button" class="w-full sm:w-auto bg-gradient-to-r from-gray-600 to-gray-800 text-white py-2 px-6 rounded-full transform hover:scale-105 font-baloo text-lg tracking-wider">
          Saya Paham
        </button>
      </div>
    </div>
  </main>

  <script>
   const chatFlow= [
     {
       text: "Sebelum berakhir, ada hal penting yang harus kamu tahu. Judi online itu bukan sekadar permainan, tapi sistem penipuan. Mereka kasih rasa menang di awal, lalu pelan-pelan bikin orang ketagihan dan terus kalah.",
       image: null, source: "Konsep: Behavioral Addiction"
     },
     {
       text: "Fakta: Tahun 2023, perputaran uang judi online di Indonesia mencapai Rp 327 triliun. Itu uang yang seharusnya dipakai untuk sekolah, makan, dan masa depan.",
       image: "https://i.ytimg.com/vi/UNKcDuTyGuE/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLCoUMcEr_iERs8-FFwu4xDz99KvNg",
       source: "Sumber: PPATK (2023)"
     },
     {
       text: "Fakta: Para bandar dan influencer bisa hidup mewah dari hasil judi online, tapi yang main justru banyak kehilangan. Sistem ini memang dirancang supaya hanya segelintir yang untung, sementara mayoritas sengsara.",
       image: null, source: "Sumber: Media Nasional (2023)"
     },
     {
       text: "Bahaya nyata dari judi online bukan cuma uang habis. Banyak orang jatuh ke utang, stres berat, bahkan depresi karena terus merasa gagal mengejar 'keberuntungan palsu'.",
       image: "https://judipastirugi.com/_ipx/w_656&f_webp&q_90/https://cms-website.judipastirugi.com/storage/804/Online-gambling_KV5_808x429-(1).webp",
       source: "Sumber: Kemenkes RI (2022)"
     },
     {
       text: "Ingat, ini cuma simulasi. Kamu aman, nggak kehilangan uang. Tapi di luar sana, ribuan orang benar-benar hancur karena nggak bisa keluar dari lingkaran judi online.",
       image: null, source: "Sumber: Kominfo (2023)"
     },
     {
       text: "Masa depan yang sehat lahir dari pilihan yang sehat juga. Bukan mengandalkan keberuntungan semu, tapi dari usaha, belajar, dan kesempatan nyata yang bisa kamu ciptakan.",
       image: null, source: "Sumber: Edukasi Literasi Keuangan OJK"
     },
     {
       text: "Coba pikirkan: apakah kamu mau jadi bagian dari permainan yang menguras, atau mau membangun hidup dengan peluang yang benar-benar ada?",
       image: null, source: null
     },
     {
       text: "Game ini berakhir di sini. Tapi kemenangan sejati adalah saat kamu bisa bilang: 'Aku pilih masa depan yang nyata, bukan mimpi palsu dari judi online.'",
       image: null, source: null
     },
     {
       text: "Ingat baik-baik: Judi online selalu bikin orang kalah. Tapi kamu bisa pilih untuk jadi pemenang di hidupmu sendiri.",
       image: null, source: null
     }
   ];

   let currentChatIndex = 0;
   let isAnimating = false;
   let musicStarted = false; // Penanda untuk audio
   
   const chatContainer = document.getElementById('chat-container');
   const contentWrapper = document.getElementById('chat-content-wrapper');
   const chatText = document.getElementById('chat-text');
   const imageContainer = document.getElementById('image-container');
   const chatImage = document.getElementById('chat-image');
   const chatSource = document.getElementById('chat-source');
   const finalButtonsContainer = document.getElementById('final-buttons-container');
   const backgroundMusic = document.getElementById('background-music');

   function showChat(index) {
     const data = chatFlow[index];
     chatText.innerHTML = data.text;
     chatImage.src = data.image || '';
     imageContainer.classList.toggle('hidden', !data.image);
     chatSource.textContent = data.source || '';
     chatSource.classList.toggle('hidden', !data.source);
   }

   function playMusic() {
       if (!musicStarted) {
           // Mencoba memutar musik, .play() mengembalikan promise
           const playPromise = backgroundMusic.play();
           if (playPromise !== undefined) {
               playPromise.then(_ => {
                   // Autoplay berhasil
                   musicStarted = true;
               }).catch(error => {
                   // Autoplay gagal, akan dimulai saat interaksi
                   console.log("Autoplay dicegah oleh browser. Audio akan dimulai saat interaksi pertama.");
               });
           }
       }
   }

   function nextChat() {
     // Memulai musik pada interaksi pertama jika autoplay gagal
     if (!musicStarted) {
       playMusic();
     }

     if (isAnimating) return;
     isAnimating = true;

     currentChatIndex++;
     
     contentWrapper.classList.remove('animate-fade-in-up');
     contentWrapper.classList.add('animate-fade-out-up');

     setTimeout(() => {
       if (currentChatIndex < chatFlow.length) {
         showChat(currentChatIndex);
         contentWrapper.classList.remove('animate-fade-out-up');
         contentWrapper.classList.add('animate-fade-in-up');
         isAnimating = false;
       } else {
         // Tombol akhir muncul, musik tetap berputar
         contentWrapper.style.display = 'none';
         finalButtonsContainer.classList.remove('hidden');
         finalButtonsContainer.classList.add('flex', 'animate-fade-in-up');
         chatContainer.onclick = null;
         chatContainer.style.cursor = 'default';
       }
     }, 500); // Durasi animasi
   }
   
   document.getElementById('help-button').addEventListener('click', (e) => {
       e.stopPropagation();
       // Pastikan musik berhenti saat tombol diklik
       backgroundMusic.pause();
       window.open('https://www.google.com/search?q=layanan+konseling+psikolog+kecanduan+judi+online+indonesia', '_blank');
   });

   // --- PERUBAHAN DI SINI ---
   document.getElementById('understand-button').addEventListener('click', (e) => {
       e.stopPropagation();
       // Mengarahkan pengguna kembali ke halaman index.html
       window.location.href = 'index.html';
   });

   // Event listener untuk menghentikan musik saat tab/jendela ditutup
   window.addEventListener('beforeunload', () => {
       backgroundMusic.pause();
   });

   window.onload = () => {
     showChat(0);
     // Mencoba memutar musik saat halaman dimuat
     playMusic();
   };
  </script>
</body>
</html>
